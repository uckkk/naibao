# 腾讯云安全组配置详细步骤

## 🎯 问题
外部无法访问服务器 `"<API_HOST>:8080"`，错误：`Failed to fetch`

## ✅ 解决方案：配置安全组

### 步骤1：登录腾讯云控制台
1. 打开浏览器，访问：https://console.cloud.tencent.com/
2. 使用您的账号登录

### 步骤2：找到服务器
1. 点击左侧菜单：**云服务器** → **实例**
2. 在实例列表中找到 IP 为 `"<SSH_HOST>"` 的服务器
3. 点击服务器名称或ID进入详情页

### 步骤3：打开安全组
1. 在服务器详情页，点击 **安全组** 标签
2. 您会看到当前绑定的安全组（例如：`launch-wizard-1`）
3. **点击安全组名称**（不是旁边的按钮，而是名称本身）

### 步骤4：添加入站规则
1. 在安全组详情页，点击 **入站规则** 标签
2. 点击右上角的 **添加规则** 按钮
3. 在弹出的对话框中填写：
   - **类型**：选择 **自定义**
   - **来源**：填写 `0.0.0.0/0`（允许所有IP访问）
   - **协议端口**：填写 `TCP:8080`
   - **策略**：选择 **允许**
   - **备注**（可选）：填写 `后端API服务`
4. 点击 **完成** 按钮

### 步骤5：等待生效
- 规则添加后，通常需要 **1-2分钟** 才能生效
- 请耐心等待

### 步骤6：验证
在浏览器中打开：
```
http://<API_HOST>:8080/health
```

如果看到 `{"status":"ok"}`，说明配置成功！

---

## 📸 操作截图说明

### 步骤2截图位置：
```
控制台首页
  └─ 云服务器 (左侧菜单)
          └─ 实例 (子菜单)
          └─ 实例列表 (找到 <SSH_HOST>)
              └─ 点击服务器名称
```

### 步骤3截图位置：
```
服务器详情页
  └─ 安全组 (标签页，在"概览"旁边)
      └─ 安全组列表
          └─ launch-wizard-1 (或其他名称)
              └─ 点击安全组名称
```

### 步骤4截图位置：
```
安全组详情页
  └─ 入站规则 (标签页)
      └─ 添加规则 (右上角按钮)
          └─ 填写表单
              └─ 完成
```

---

## ⚠️ 常见问题

### Q: 找不到"安全组"标签？
A: 确保您点击的是服务器详情页，不是列表页。

### Q: 点击安全组名称没反应？
A: 尝试点击安全组ID，或者点击"修改规则"按钮。

### Q: 添加规则后还是无法访问？
A: 
1. 等待2-3分钟让规则生效
2. 检查规则是否正确添加（来源应该是 `0.0.0.0/0`）
3. 检查服务器防火墙是否也开放了8080端口

### Q: 如何确认规则已添加？
A: 在安全组详情页的"入站规则"列表中，应该能看到：
```
类型: 自定义
来源: 0.0.0.0/0
协议端口: TCP:8080
策略: 允许
```

---

## 🔍 验证命令

配置完成后，可以在服务器上验证：

```bash
# 在服务器上执行
curl -v http://<API_HOST>:8080/health
```

如果从服务器内部也无法访问自己的公网IP，这是正常的（某些云服务商限制）。重要的是从外部（您的电脑）能够访问。

---

## 📞 如果还有问题

如果按照以上步骤操作后仍然无法访问，请告诉我：
1. 安全组规则是否已添加成功
2. 规则的具体内容（截图或文字描述）
3. 浏览器访问 `http://<API_HOST>:8080/health` 的具体错误信息

