# 服务器一键修复说明

## 🚀 超简单操作步骤

### 方法1：直接复制粘贴（推荐）

**在服务器上执行以下命令：**

```bash
cd /opt/naibao/backend && \
./stop_server.sh && \
sed -i 's/Access-Control-Allow-Credentials", "true"/Access-Control-Allow-Credentials", "false"/' router/middleware/cors.go && \
go build -o naibao-server main.go && \
./start_server.sh && \
echo "✅ 修复完成！" && \
curl -s http://127.0.0.1:8080/health
```

**就这么简单！一条命令搞定！**

---

### 方法2：使用一键修复脚本

1. **将脚本上传到服务器**（如果无法上传，使用方法1）

2. **在服务器上执行：**
```bash
cd /opt/naibao/backend
chmod +x 一键修复.sh
./一键修复.sh
```

---

## ⚠️ 重要：配置腾讯云安全组

**这是外部无法访问的主要原因！**

### 超简单步骤：

1. **打开浏览器**，访问：https://console.cloud.tencent.com/

2. **登录**您的腾讯云账号

3. **找到服务器**
   - 点击左侧菜单：**云服务器** → **实例**
   - 找到IP为 `<SSH_HOST>` 的服务器

4. **打开安全组**
   - 点击服务器名称进入详情
   - 点击 **安全组** 标签
   - 点击安全组名称（例如：launch-wizard-1）

5. **添加规则**
   - 点击 **入站规则** → **添加规则**
   - 填写：
     - **类型**：选择 **自定义**
     - **来源**：填写 `0.0.0.0/0`
     - **协议端口**：填写 `TCP:8080`
     - **策略**：选择 **允许**
   - 点击 **完成**

6. **等待1分钟**，然后测试

---

## ✅ 验证修复

修复后，在浏览器中打开：
```
http://<API_HOST>:8080/health
```

如果看到 `{"status":"ok"}`，说明修复成功！

---

## 📞 如果还有问题

执行修复命令后，如果还有问题，请告诉我：
1. 修复命令的执行结果
2. 安全组是否已配置
3. 浏览器访问 `http://<API_HOST>:8080/health` 的结果

