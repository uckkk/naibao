# å¿«é€Ÿå¼€å§‹æŒ‡å—

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¯åŠ¨

### ç¬¬ä¸€æ­¥ï¼šé…ç½®æ•°æ®åº“

#### æ–¹å¼1ï¼šä½¿ç”¨è„šæœ¬ï¼ˆæ¨èï¼‰

```bash
# è¿è¡Œæ•°æ®åº“é…ç½®è„šæœ¬
./scripts/setup_db.sh
```

#### æ–¹å¼2ï¼šæ‰‹åŠ¨é…ç½®

```bash
# 1. åˆ›å»ºæ•°æ®åº“
psql -U postgres -c "CREATE DATABASE naibao;"

# 2. å¯¼å…¥è¡¨ç»“æ„
psql -U postgres -d naibao -f database/schema.sql

# 3. å¯¼å…¥åˆå§‹åŒ–æ•°æ®
psql -U postgres -d naibao -f database/init_data.sql
```

---

### ç¬¬äºŒæ­¥ï¼šé…ç½®åç«¯ç¯å¢ƒå˜é‡

```bash
cd backend

# å¤åˆ¶ç¤ºä¾‹é…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“å¯†ç ç­‰
# macOS/Linux
nano .env
# æˆ–
vim .env

# Windows (ä½¿ç”¨è®°äº‹æœ¬)
notepad .env
```

ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„å…³é”®é…ç½®ï¼š
```env
DB_PASSWORD=your_actual_postgres_password
JWT_SECRET=your-strong-secret-key-here
```

---

### ï¼ˆå¯é€‰ï¼‰ç®¡ç†å‘˜åå°é…ç½®

ç®¡ç†åå°ç”¨äºç»´æŠ¤â€œå«å¥å§”æ ‡å‡†ç‰ˆæœ¬/å¯ç”¨/å¯¼å…¥JSONâ€å’Œâ€œå¥¶ç²‰è§„æ ¼éªŒè¯/ç»´æŠ¤â€ã€‚å‡ºäºå®‰å…¨è€ƒè™‘ï¼Œé»˜è®¤åªæœ‰ç™½åå•è´¦å·å¯è¿›å…¥ã€‚

1) å…ˆæ­£å¸¸æ³¨å†Œ/ç™»å½•ä¸€æ¬¡  
2) è·å–å½“å‰è´¦å· `user_id`ï¼ˆä¸¤ç§æ–¹å¼ä»»é€‰å…¶ä¸€ï¼‰ï¼š

- æ–¹å¼ Aï¼šè°ƒç”¨æ¥å£æŸ¥çœ‹ï¼ˆæ¨èï¼‰

```bash
# å…ˆç™»å½•è·å– tokenï¼ˆæ›¿æ¢æ‰‹æœºå·/å¯†ç ï¼‰
curl -s -X POST "http://localhost:8080/api/public/login" \\
  -H "Content-Type: application/json" \\
  -d '{"phone":"13800000000","password":"your_password"}'

# å†ç”¨ token æŸ¥è¯¢ profileï¼Œè¿”å›é‡ŒåŒ…å« user.id
curl -s "http://localhost:8080/api/user/profile" \\
  -H "Authorization: Bearer YOUR_TOKEN"
```

- æ–¹å¼ Bï¼šH5 æ‰“å¼€æ§åˆ¶å°/Networkï¼ŒæŸ¥çœ‹ç™»å½•å“åº”ä½“ä¸­çš„ `user.id`

3) åœ¨åç«¯ç¯å¢ƒå˜é‡ä¸­è®¾ç½®ç®¡ç†å‘˜ç™½åå•ï¼ˆé€—å·åˆ†éš”å¤šä¸ªï¼‰ï¼š

```env
ADMIN_USER_IDS=52,53
```

4) é‡å¯åç«¯æœåŠ¡åï¼Œå†ä»é¦–é¡µèœå•è¿›å…¥â€œç®¡ç†åå°â€

---

### ç¬¬ä¸‰æ­¥ï¼šå¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend

# å®‰è£…ä¾èµ–
go mod download

# å¯åŠ¨æœåŠ¡
go run main.go
```

å¦‚æœçœ‹åˆ° `Server starting on :8080`ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸï¼

---

### ç¬¬å››æ­¥ï¼šå¯åŠ¨å‰ç«¯

```bash
cd frontend

# å®‰è£…ä¾èµ–
npm ci

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
npm run dev:h5        # H5å¼€å‘
# æˆ–
npm run dev:mp-weixin # å¾®ä¿¡å°ç¨‹åºå¼€å‘
# æˆ–
npm run dev:app       # Appå¼€å‘
```

---

## âœ… éªŒè¯å®‰è£…

### æµ‹è¯•æ•°æ®åº“è¿æ¥

```bash
# æµ‹è¯• PostgreSQL
psql -U postgres -d naibao -c "SELECT COUNT(*) FROM health_standards;"

# æµ‹è¯• Redis
redis-cli ping
```

### æµ‹è¯•åç«¯API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8080/health

# åº”è¯¥è¿”å›: {"status":"ok"}
```

---

## ğŸ†˜ å¸¸è§é—®é¢˜

### é—®é¢˜ï¼šPostgreSQL è¿æ¥å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤ PostgreSQL å·²å®‰è£…ï¼š`psql --version`
2. ç¡®è®¤æœåŠ¡å·²å¯åŠ¨ï¼š`brew services list` (macOS) æˆ– `systemctl status postgresql` (Linux)
3. æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®

### é—®é¢˜ï¼šæ‰¾ä¸åˆ° go å‘½ä»¤

**è§£å†³æ–¹æ¡ˆ**:
- macOS: `brew install go`
- Linux: `sudo apt install golang-go`
- Windows: ä»å®˜ç½‘ä¸‹è½½å®‰è£…

### é—®é¢˜ï¼šæ‰¾ä¸åˆ° npm å‘½ä»¤

**è§£å†³æ–¹æ¡ˆ**:
- å®‰è£… Node.js: https://nodejs.org/

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- [æ•°æ®åº“é…ç½®æŒ‡å—](../test/æ•°æ®åº“é…ç½®æŒ‡å—.md) - è¯¦ç»†çš„æ•°æ®åº“é…ç½®è¯´æ˜
- [éªŒæ”¶æ–‡æ¡£](../test/éªŒæ”¶æ–‡æ¡£.md) - åŠŸèƒ½éªŒæ”¶æ¸…å•

---

**é…ç½®å®Œæˆåå³å¯å¼€å§‹ä½¿ç”¨ï¼** ğŸ‰
